# 289. Game of Life

> [Leetcode link](https://leetcode.com/problems/game-of-life/)



## è§£é¢˜æ€è·¯

æœ¬é¢˜éå¸¸æœ‰æ„æ€ï¼Œæˆ‘ç‰¹åˆ«å»æ‰¾äº†ä¸€ä¸‹è¿˜æœ‰å¯¹åº”çš„æ¸¸æˆï¼Œå¯ä»¥è¿­ä»£å‡ºå¾ˆå¤šæœ‰æ„æ€çš„å›¾æ¡ˆï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç©ç©çœ‹ğŸ˜†

æœ¬é¢˜çš„éš¾ç‚¹åœ¨äºå¦‚ä½•åœ¨ä¸æ„é€ å¦ä¸€ä¸ªæ•°ç»„çš„æƒ…å†µä¸‹â€œåŒæ­¥â€æ”¹å˜ç»†èƒçš„çŠ¶æ€ã€‚

çªç ´ç‚¹åœ¨äºæ„é€ å‡ºåŒ…å«ä¸Šä¸€ä»£ä¿¡æ¯çš„â€œä¼ªçŠ¶æ€â€ï¼Œè€ƒè™‘åˆ°é¢˜ç›®ç»™å‡ºçš„ int æ•°ç»„åªç”¨äº† 1 ä¸ª bitï¼Œæˆ‘ä»¬çº¦å®šæœ‰å¦‚ä¸‹çš„çŠ¶æ€ï¼š

> ç¬¬ 0 ä½è¡¨ç¤ºå½“å‰çš„çŠ¶æ€ï¼Œç¬¬1ä½è¡¨ç¤ºä¸‹ä¸€ä»£çš„çŠ¶æ€ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯ bitsï¼‰

- `00`: ç°åœ¨æ˜¯æ­»çš„ï¼Œä¸‹ä¸€ä»£è¿˜æ˜¯æ­»çš„
- `01`: ç°åœ¨æ˜¯æ´»çš„ï¼Œä¸‹ä¸€ä»£æ­»äº†
- `10`: ç°åœ¨æ˜¯æ­»çš„ï¼Œä¸‹ä¸€ä»£æ´»äº†
- `11`: ç°åœ¨æ˜¯æ´»çš„ï¼Œä¸‹ä¸€ä»£è¿˜æ˜¯æ´»çš„

æ¥ä¸‹æ¥æˆ‘ä»¬å°±éå†æ•°ç»„ï¼ŒæŠŠå…ƒç´ ä¸ 1 ç›¸ä¸ `&` å°±å¯ä»¥å¾—åˆ°å½“å‰çŠ¶æ€ï¼ŒæŠŠå…ƒç´ è·Ÿ 2 ç›¸æˆ– `|` å°±å¯ä»¥è®°å½•ä¸‹ä¸€ä»£çš„çŠ¶æ€ï¼ˆå¦‚æœä¸‹ä¸€ä»£æ­»äº†å°±ä¸ç”¨ç®¡ï¼Œå› ä¸ºæœ¬æ¥å°±æ˜¯ 0ï¼‰

æœ€åè®°å¾—æŠŠæ‰€æœ‰å…ƒç´ å³ç§» `>>` ä¸€ä½å°±èƒ½å¾—åˆ°ä¸‹ä¸€ä»£çš„çŠ¶æ€äº†

### C++

```cpp
class Solution {
 public:
  // è®¡ç®—å½“å‰æ´»ç€çš„é‚»å±…
  int countLifeNeighbor(vector<vector<int>>& board, int row, int col) {
    int count = 0;
    // â†–ï¸
    count += (row == 0 || col == 0) ? 0 : board[row - 1][col - 1] & 1;
    // â¬†ï¸
    count += (row == 0) ? 0 : board[row - 1][col] & 1;
    // â†—ï¸
    count += (row == 0 || col == board[0].size() - 1)
                 ? 0
                 : board[row - 1][col + 1] & 1;
    // â¬…ï¸
    count += (col == 0) ? 0 : board[row][col - 1] & 1;
    // â¡ï¸
    count += (col == board[0].size() - 1) ? 0 : board[row][col + 1] & 1;
    // â†™ï¸
    count +=
        (row == board.size() - 1 || col == 0) ? 0 : board[row + 1][col - 1] & 1;
    // â¬‡ï¸
    count += (row == board.size() - 1) ? 0 : board[row + 1][col] & 1;
    // â†˜ï¸
    count += (row == board.size() - 1 || col == board[0].size() - 1)
                 ? 0
                 : board[row + 1][col + 1] & 1;

    return count;
  }
  void gameOfLife(vector<vector<int>>& board) {
    for (int row = 0; row < board.size(); row++) {
      for (int col = 0; col < board[0].size(); col++) {
        int liveNeighbor = countLifeNeighbor(board, row, col);
        // å¦‚æœæœ¬æ¥æ˜¯æ­»çš„ï¼Œå¹¶ä¸”æ´»çš„é‚»å±…åˆšå¥½æœ‰ 3 ä¸ªï¼Œåˆ™å˜æˆ 10
        if (!(board[row][col] & 1) && liveNeighbor == 3) {
          board[row][col] |= 2;
        } else if (board[row][col] & 1) {
          // æœ¬æ¥æ˜¯æ´»çš„ï¼Œä¸”æ´»çš„é‚»å±…åˆšå¥½æ˜¯ 2 ä¸ªæˆ–è€… 3 ä¸ªï¼Œåˆ™å˜æˆ 11
          if (liveNeighbor == 2 || liveNeighbor == 3) {
            board[row][col] |= 2;
          }
          // å…¶ä½™ä¿æŒåŸæ ·
        }
      }
    }
    for (int row = 0; row < board.size(); row++) {
      for (int col = 0; col < board[0].size(); col++) {
        // éå†å®Œä¸€æ¬¡ä¹‹åæŠŠå…¨ä½“å³ç§»ä¸€ä½ï¼ˆæŠŠæ—§çŠ¶æ€æ´—æ‰ï¼‰
        board[row][col] >>= 1;
      }
    }
  }
};
```



### Javascript

```js
/**
 * @param {number[][]} board
 * @return {void} Do not return anything, modify board in-place instead.
 */
var gameOfLife = function (board) {
	for (let row = 0; row < board.length; row++) {
		for (let col = 0; col < board[0].length; col++) {
			let liveNeighbor = countLifeNeighbor(board, row, col);
			// å¦‚æœæœ¬æ¥æ˜¯æ­»çš„ï¼Œå¹¶ä¸”æ´»çš„é‚»å±…åˆšå¥½æœ‰ 3 ä¸ªï¼Œåˆ™å˜æˆ 10
			if (!(board[row][col] & 1) && liveNeighbor === 3) {
				board[row][col] |= 2;
			} else if (board[row][col] & 1) {
				// æœ¬æ¥æ˜¯æ´»çš„ï¼Œä¸”æ´»çš„é‚»å±…åˆšå¥½æ˜¯ 2 ä¸ªæˆ–è€… 3 ä¸ªï¼Œåˆ™å˜æˆ 11
				if (liveNeighbor === 2 || liveNeighbor === 3) {
					board[row][col] |= 2;
				}
				// å…¶ä½™ä¿æŒåŸæ ·
			}
		}
	}
	for (let row = 0; row < board.length; row++) {
		for (let col = 0; col < board[0].length; col++) {
			// éå†å®Œä¸€æ¬¡ä¹‹åæŠŠå…¨ä½“å³ç§»ä¸€ä½ï¼ˆæŠŠæ—§çŠ¶æ€æ´—æ‰ï¼‰
			board[row][col] >>= 1;
		}
	}
};

// è®¡ç®—å½“å‰æ´»ç€çš„é‚»å±…
function countLifeNeighbor(board, row, col) {
	let count = 0;
	// â†–ï¸
	count += row === 0 || col === 0 ? 0 : board[row - 1][col - 1] & 1;
	// â¬†ï¸
	count += row === 0 ? 0 : board[row - 1][col] & 1;
	// â†—ï¸
	count +=
		row === 0 || col === board[0].length - 1 ? 0 : board[row - 1][col + 1] & 1;
	// â¬…ï¸
	count += col === 0 ? 0 : board[row][col - 1] & 1;
	// â¡ï¸
	count += col === board[0].length - 1 ? 0 : board[row][col + 1] & 1;
	// â†™ï¸
	count +=
		row === board.length - 1 || col === 0 ? 0 : board[row + 1][col - 1] & 1;
	// â¬‡ï¸
	count += row === board.length - 1 ? 0 : board[row + 1][col] & 1;
	// â†˜ï¸
	count +=
		row === board.length - 1 || col === board[0].length - 1
			? 0
			: board[row + 1][col + 1] & 1;

	return count;
}

```

